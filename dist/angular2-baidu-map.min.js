module.exports=function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(1),MapStatus_1=__webpack_require__(2),defaults_1=__webpack_require__(3),Loader_1=__webpack_require__(4),CoreOperations_1=__webpack_require__(5),BaiduMap=function(){function BaiduMap(el){this.el=el,this.onMapLoaded=new core_1.EventEmitter,this.onMarkerClicked=new core_1.EventEmitter,this.onMarkerDbClicked=new core_1.EventEmitter,this.onMarkerRightClicked=new core_1.EventEmitter,this.onMarkerDragStart=new core_1.EventEmitter,this.onMarkerDragEnd=new core_1.EventEmitter,this.onMapDblClicked=new core_1.EventEmitter,this.previousMarkers=[]}return BaiduMap.prototype.ngOnInit=function(){var offlineOpts=Object.assign({},defaults_1.defaultOfflineOpts,this.offlineOpts);this.offlineWords=offlineOpts.txt,Loader_1.loader(this.ak,offlineOpts,this._draw.bind(this),this.protocol)},BaiduMap.prototype.ngOnChanges=function(changes){var baiduMap=window.baiduMap;if(baiduMap&&baiduMap.status===MapStatus_1.MapStatus.LOADED&&(!changes.options.isFirstChange()||this.map)){var opts=changes.options.currentValue;opts.hasOwnProperty("center")&&CoreOperations_1.reCenter(this.map,opts),opts.hasOwnProperty("zoom")&&CoreOperations_1.reZoom(this.map,opts),CoreOperations_1.redrawMarkers.bind(this)(this.map,this.previousMarkers,opts)}},BaiduMap.prototype._draw=function(){var _this=this,options=Object.assign({},defaults_1.defaultOpts,this.options);this.map=CoreOperations_1.createInstance(options,this.el.nativeElement),this.onMapLoaded.emit(this.map),CoreOperations_1.redrawMarkers.bind(this)(this.map,this.previousMarkers,options),this.map.addEventListener("dblclick",function(evt){_this.onMapDblClicked.emit(evt)})},BaiduMap}();__decorate([core_1.Input(),__metadata("design:type",String)],BaiduMap.prototype,"ak",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],BaiduMap.prototype,"protocol",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],BaiduMap.prototype,"options",void 0),__decorate([core_1.Input("offline"),__metadata("design:type",Object)],BaiduMap.prototype,"offlineOpts",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMapLoaded",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMarkerClicked",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMarkerDbClicked",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMarkerRightClicked",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMarkerDragStart",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMarkerDragEnd",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],BaiduMap.prototype,"onMapDblClicked",void 0),BaiduMap=__decorate([core_1.Component({changeDetection:core_1.ChangeDetectionStrategy.OnPush,selector:"baidu-map",styles:["\n        .offlinePanel{\n            width: 100%;\n            height: 100%;\n            background-color: #E6E6E6;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            opacity: 0;\n        }\n    ","\n        .offlineLabel{\n            font-size: 30px;\n        }\n    "],template:'\n        <div class="offlinePanel">\n            <label class="offlineLabel">{{ offlineWords }}</label>\n        </div>\n    '}),__metadata("design:paramtypes",[core_1.ElementRef])],BaiduMap),exports.BaiduMap=BaiduMap;var ControlAnchor_1=__webpack_require__(10);exports.ControlAnchor=ControlAnchor_1.ControlAnchor,__export(__webpack_require__(11));var MapStatus_2=__webpack_require__(2);exports.MapStatus=MapStatus_2.MapStatus},function(module,exports){module.exports=require("@angular/core")},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MapStatus;!function(MapStatus){MapStatus[MapStatus.LOADING=0]="LOADING",MapStatus[MapStatus.LOADED=1]="LOADED"}(MapStatus=exports.MapStatus||(exports.MapStatus={}))},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOpts={navCtrl:!0,scaleCtrl:!0,overviewCtrl:!0,enableScrollWheelZoom:!0,geolocationCtrl:!1,zoom:10},exports.defaultOfflineOpts={retryInterval:3e4,txt:"OFFLINE"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MapStatus_1=__webpack_require__(2);exports.loader=function(ak,offlineOpts,callback,protocol){var realProtocol=protocol||location.protocol,MAP_URL=realProtocol+"//api.map.baidu.com/api?v=2.0&ak="+ak+"&callback=baidumapinit&s="+("https:"===realProtocol?1:0),win=window,baiduMap=win.baiduMap;if(baiduMap&&baiduMap.status===MapStatus_1.MapStatus.LOADING)return baiduMap.callbacks.push(callback);if(baiduMap&&baiduMap.status===MapStatus_1.MapStatus.LOADED)return callback();win.baiduMap={status:MapStatus_1.MapStatus.LOADING,callbacks:[]},win.baidumapinit=function(){win.baiduMap.status=MapStatus_1.MapStatus.LOADED,callback(),win.baiduMap.callbacks.forEach(function(cb){return cb()}),win.baiduMap.callbacks=[]};var createTag=function(){var script=document.createElement("script");script.type="text/javascript",script.src=MAP_URL,script.onerror=function(){Array.prototype.slice.call(document.querySelectorAll("baidu-map div")).forEach(function(node){node.style.opacity=1}),document.body.removeChild(script),setTimeout(createTag,offlineOpts.retryInterval)},document.body.appendChild(script)};createTag()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GeoControl_1=__webpack_require__(6),ScaleControl_1=__webpack_require__(7),OverviewMapControl_1=__webpack_require__(8),NavigationControl_1=__webpack_require__(9);exports.reCenter=function(map,opts){var BMap=window.BMap;opts.center&&map.setCenter(new BMap.Point(opts.center.longitude,opts.center.latitude))},exports.reZoom=function(map,opts){opts.zoom&&map.setZoom(opts.zoom)},exports.createInstance=function(opts,element){var BMap=window.BMap,map=new BMap.Map(element);return map.centerAndZoom(new BMap.Point(opts.center.longitude,opts.center.latitude),opts.zoom),NavigationControl_1.setNavigationCtrl(map,opts),ScaleControl_1.setScaleCtrl(map,opts),OverviewMapControl_1.setOverviewMapCtrl(map,opts),opts.enableScrollWheelZoom&&map.enableScrollWheelZoom(),GeoControl_1.setGeoCtrl(map,opts),map},exports.createMarker=function(marker,pt){var BMap=window.BMap,opts={};if(marker.icon){if(marker.anchor_x&&marker.anchor_y)var icon=new BMap.Icon(marker.icon,new BMap.Size(marker.width,marker.height),{anchor:new BMap.Size(marker.anchor_x,marker.anchor_y)});else var icon=new BMap.Icon(marker.icon,new BMap.Size(marker.width,marker.height));opts.icon=icon}return marker.enableDragging&&(opts.enableDragging=!0),new BMap.Marker(pt,opts)},exports.redrawMarkers=function(map,previousMarkers,opts){var BMap=window.BMap,self=this;previousMarkers.forEach(function(_a){var marker=_a.marker,listeners=_a.listeners;listeners.forEach(function(listener){marker.removeEventListener("click",listener)}),map.removeOverlay(marker)}),previousMarkers.length=0,opts.markers&&opts.markers.forEach(function(marker){var marker2=exports.createMarker(marker,new BMap.Point(marker.longitude,marker.latitude));map.addOverlay(marker2);var previousMarker={marker:marker2,listeners:[]};previousMarkers.push(previousMarker);var onMarkerClickedListener=function(evt){evt.ori_marker=marker,self.onMarkerClicked.emit(evt)};if(marker2.addEventListener("click",onMarkerClickedListener),previousMarker.listeners.push(onMarkerClickedListener),marker.title||marker.content){var msg="<p>"+(marker.title||"")+"</p><p>"+(marker.content||"")+"</p>",infoWindow2_1=new BMap.InfoWindow(msg,{enableMessage:!!marker.enableMessage});marker.autoDisplayInfoWindow&&marker2.openInfoWindow(infoWindow2_1);var openInfoWindowListener=function(){this.openInfoWindow(infoWindow2_1)};previousMarker.listeners.push(openInfoWindowListener),marker2.addEventListener("click",openInfoWindowListener)}var onMarkerDbClickedListener=function(evt){evt.ori_marker=marker,self.onMarkerDbClicked.emit(evt)};marker2.addEventListener("dblclick",onMarkerDbClickedListener),previousMarker.listeners.push(onMarkerDbClickedListener);var onMarkerDragStartListener=function(evt){evt.ori_marker=marker,self.onMarkerDragStart.emit(evt)};marker2.addEventListener("dragstart",onMarkerDragStartListener),previousMarker.listeners.push(onMarkerDragStartListener);var onMarkerDragEndListener=function(evt){console.log("marker drag end."),evt.ori_marker=marker,self.onMarkerDragEnd.emit(evt)};console.log("add drag end listener.");var result=marker2.addEventListener("dragend",onMarkerDragEndListener);console.log(result),previousMarker.listeners.push(onMarkerDragEndListener);var onMarkerRightClickedListener=function(evt){console.log("right click marker."),evt.ori_marker=marker,self.onMarkerRightClicked.emit(evt)};marker2.addEventListener("rightclick",onMarkerRightClickedListener),previousMarker.listeners.push(onMarkerRightClickedListener)})}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setGeoCtrl=function(map,opts){var BMap=window.BMap,geoOpts={};if("boolean"!=typeof opts.geolocationCtrl){var ctrl=opts.geolocationCtrl;ctrl.anchor&&(geoOpts.anchor=ctrl.anchor),ctrl.offset&&(geoOpts.offset=new BMap.Size(ctrl.offset.width,ctrl.offset.height)),"boolean"==typeof geoOpts.showAddressBar&&(geoOpts.showAddressBar=ctrl.showAddressBar),"boolean"==typeof geoOpts.enableAutoLocation&&(geoOpts.enableAutoLocation=ctrl.enableAutoLocation),geoOpts.locationIcon&&(geoOpts.locationIcon=new BMap.Size(ctrl.locationIcon.url,new BMap.Size(ctrl.locationIcon.size.width,ctrl.locationIcon.size.height))),map.addControl(new BMap.GeolocationControl(geoOpts))}else opts.geolocationCtrl&&map.addControl(new BMap.GeolocationControl)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setScaleCtrl=function(map,opts){var BMap=window.BMap,scaleOpts={};if("boolean"!=typeof opts.scaleCtrl){var ctrl=opts.scaleCtrl;ctrl.anchor&&(scaleOpts.anchor=ctrl.anchor),ctrl.offset&&(scaleOpts.offset=new BMap.Size(ctrl.offset.width,ctrl.offset.height)),map.addControl(new BMap.ScaleControl(scaleOpts))}else opts.scaleCtrl&&map.addControl(new BMap.ScaleControl)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setOverviewMapCtrl=function(map,opts){var BMap=window.BMap,overviewOpts={};if("boolean"!=typeof opts.overviewCtrl){var ctrl=opts.overviewCtrl;ctrl.anchor&&(overviewOpts.anchor=ctrl.anchor),ctrl.offset&&(overviewOpts.offset=new BMap.Size(ctrl.offset.width,ctrl.offset.height)),ctrl.size&&(overviewOpts.size=new BMap.Size(ctrl.size.width,ctrl.size.height)),"undefined"!=typeof ctrl.isOpen&&(overviewOpts.isOpen=ctrl.isOpen),map.addControl(new BMap.OverviewMapControl(overviewOpts))}else opts.overviewCtrl&&map.addControl(new BMap.OverviewMapControl)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setNavigationCtrl=function(map,opts){var BMap=window.BMap,navOpts={};if("boolean"!=typeof opts.navCtrl){var ctrl=opts.navCtrl;ctrl.anchor&&(navOpts.anchor=ctrl.anchor),ctrl.offset&&(navOpts.offset=new BMap.Size(ctrl.offset.width,ctrl.offset.height)),"undefined"!=typeof ctrl.type&&(navOpts.type=ctrl.type),"undefined"!=typeof ctrl.showZoomInfo&&(navOpts.showZoomInfo=ctrl.showZoomInfo),"undefined"!=typeof ctrl.enableGeolocation&&(navOpts.enableGeolocation=ctrl.enableGeolocation),map.addControl(new BMap.NavigationControl(navOpts))}else opts.navCtrl&&map.addControl(new BMap.NavigationControl)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ControlAnchor;!function(ControlAnchor){ControlAnchor[ControlAnchor.BMAP_ANCHOR_TOP_LEFT=0]="BMAP_ANCHOR_TOP_LEFT",ControlAnchor[ControlAnchor.BMAP_ANCHOR_TOP_RIGHT=1]="BMAP_ANCHOR_TOP_RIGHT",ControlAnchor[ControlAnchor.BMAP_ANCHOR_BOTTOM_LEFT=2]="BMAP_ANCHOR_BOTTOM_LEFT",ControlAnchor[ControlAnchor.BMAP_ANCHOR_BOTTOM_RIGHT=3]="BMAP_ANCHOR_BOTTOM_RIGHT"}(ControlAnchor=exports.ControlAnchor||(exports.ControlAnchor={}))},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var NavigationControlType;!function(NavigationControlType){NavigationControlType[NavigationControlType.BMAP_NAVIGATION_CONTROL_LARGE=0]="BMAP_NAVIGATION_CONTROL_LARGE",NavigationControlType[NavigationControlType.BMAP_NAVIGATION_CONTROL_SMALL=1]="BMAP_NAVIGATION_CONTROL_SMALL",NavigationControlType[NavigationControlType.BMAP_NAVIGATION_CONTROL_PAN=2]="BMAP_NAVIGATION_CONTROL_PAN",NavigationControlType[NavigationControlType.BMAP_NAVIGATION_CONTROL_ZOOM=3]="BMAP_NAVIGATION_CONTROL_ZOOM"}(NavigationControlType=exports.NavigationControlType||(exports.NavigationControlType={}))}]);